<!DOCTYPE html>
<html>

<body>

<p>Password: </p><input id="password" type="password" />
<button id="login">Login</button>
<p id="output"></p>

<script src="js/openpgp.min.js"></script>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/readFile.js"></script>
<script src="js/decrypt.js"></script>
<script type="text/javascript">

(async function() {
	var encrypted;

	document.getElementById("login").addEventListener("click", async function()
	{
		var output = document.getElementById("output");
		var password = document.getElementById("password").value;

		if(password == "")
		{
			output.innerHTML = "No password provided";
			output.style.color = "red";
		}
		else
		{
			encrypted = await readFile("data/test.asc");		
			console.log("encrypted file: " + encrypted);
			await decrypt(encrypted, password);
			window.open("mainWindow.html", "_self", "false");
		}
			
	});

})();
</script>

</body>

</html>
